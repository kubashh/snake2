(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{4083:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var l=r(7876),o=r(2692);let n=(e,t,r,l,o)=>{i.ctx&&(o&&(i.ctx.fillStyle=o),i.ctx.fillRect(e,t,r,l))},s=()=>{let{width:e,height:t}=i.ctx.canvas;n(0,0,e,t,"#008")},c=(e,t)=>{let{pixelSize:r,boardSize:l,ctx:o}=i,s=Math.floor(e.x-t.x*r),c=Math.floor(o.canvas.height-(e.y-t.y*r)-l*r),a=l*r,u=l*r;s<0&&(a+=s,s=0),c<0&&(u+=c,c=0),n(s,c,a,u,"#000")},a=e=>{let{head:t,board:r}=e,{pixelSize:l,appleColor:o,ctx:a}=i,{width:u,height:d}=a.canvas,f=l/2;s();let h={x:Math.floor(u/2-f),y:Math.floor(d/2+f)};c(h,t);let x=o;for(let e of r){if("string"==typeof e){x=e;continue}let[r,o]=e;r-=t.x,o-=t.y,n(r*l+h.x,-o*l+h.y-2*l,l,l,x)}},i={inGame:!1,user:{nick:"",color:"black"},socket:(0,o.Ng)("https://literate-lamp-wrgwx4wpwgx3g9gw-4000.app.github.dev"),ctx:{fillStyle:"",fillRect:(e,t,r,l)=>{},canvas:{width:0,height:0}},refresh:()=>{},pixelSize:40,boardSize:0,appleColor:""};i.socket.on("connect",()=>i.refresh()),i.socket.on("disconnect",()=>i.refresh()),i.socket.on("static",e=>{let{boardSize:t,appleColor:r}=e;i.boardSize=t,i.appleColor=r}),i.socket.on("new",e=>{let{success:t,message:r}=e;t?(i.inGame=!0,i.refresh()):alert(r)}),i.socket.on("end",()=>{localStorage.setItem("data",JSON.stringify(i.user)),i.inGame=!1,i.refresh()}),i.socket.on("board",e=>{if(!i.ctx.canvas)return;let[t,...r]=JSON.parse(e);a({head:t,board:r})});let u=()=>(0,l.jsx)("header",{className:"z-1 absolute w-screen",children:(0,l.jsxs)("form",{className:"w-fit mx-auto p-6 rounded-lg bg-zinc-800 flex flex-col",onSubmit:e=>{var t;e.preventDefault();let r=[...document.getElementsByTagName("input")].reduce((e,t)=>["nick","color"].includes(t.id)?{...e,[t.type]:t.value}:e,{...i.user});r.nick&&r.color&&((null==(t=i.socket)?void 0:t.connected)?i.socket.emit("new",i.user):alert("Nie połączono z serwerem!"))},children:[(0,l.jsx)("h1",{children:"Menu"}),(0,l.jsx)("input",{className:"mx-6 my-4 border-1 rounded-lg",type:"text",id:"nick",defaultValue:i.user.nick,required:!0,autoFocus:!0}),(0,l.jsx)("input",{className:"mx-6 my-4 border-1 rounded-lg cursor-pointer",type:"color",id:"color",defaultValue:i.user.color}),(0,l.jsx)("input",{className:"mx-6 my-4 border-1 rounded-lg cursor-pointer",type:"submit",value:"Graj!"})]})});var d=r(4232);let f=()=>{let e=(0,d.useState)(!1)[1];return()=>e(e=>!e)};function h(){let e=null,t=t=>{e&&e%2==t%2||(e=t,i.socket.emit("direction",t))};return(0,d.useEffect)(()=>{document.addEventListener("keydown",e=>{let{key:r}=e;if(i.inGame)switch(r.toLowerCase()){case"w":return t(0);case"d":return t(1);case"s":return t(2);case"a":return t(3)}})},[]),i.refresh=f(),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{}),(0,l.jsx)("main",{children:(0,l.jsx)("h1",{children:"Hello world!"})})]})}},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4083)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[692,636,593,792],()=>t(6760)),_N_E=e.O()}]);